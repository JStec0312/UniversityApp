# Development Guide

This guide provides instructions for developers contributing to the UniversityApp project.

## Environment Setup

### Prerequisites

- Python 3.10 or higher
- Git
- PostgreSQL (optional, SQLite can be used for development)

### Setting Up the Development Environment

1. Clone the repository:
   ```
   git clone https://github.com/yourusername/UniversityApp.git
   cd UniversityApp
   ```

2. Create a virtual environment:
   ```
   python -m venv venv
   venv\Scripts\activate
   ```

3. Install dependencies:
   ```
   pip install -r requirements.txt
   ```

4. Create a `.env` file in the root directory:
   ```
   DATABASE_URL=sqlite:///./dev.db
   SECRET_KEY=your_development_secret_key
   ```

5. Initialize the database:
   ```
   python -m app.db_init
   ```

## Development Workflow

### Running the Application

```
uvicorn app.main:app --reload
```

The application will be available at http://localhost:8000.

### FastAPI Documentation

FastAPI automatically generates interactive API documentation:

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### Adding New Features

#### Step 1: Create a new branch

```
git checkout -b feature/your-feature-name
```

#### Step 2: Implement your changes

Follow these steps when adding new functionality:

1. **Add/update model**: Define the data structure in `app/models/`
2. **Create/update repository**: Implement data access in `app/repositories/`
3. **Create/update schema**: Define validation in `app/schemas/`
4. **Implement service**: Add business logic in `app/services/`
5. **Create API endpoint**: Define API route in `app/api/`
6. **Write tests**: Add tests in `tests/`

#### Step 3: Run tests

```
pytest
```

#### Step 4: Submit a pull request

```
git push origin feature/your-feature-name
```

## Code Standards

### Python Style Guide

- Follow PEP 8 guidelines
- Use type hints
- Document functions and classes with docstrings

### Commit Messages

Follow the conventional commits format:

```
feat: add user authentication
fix: correct database connection issue
docs: update API documentation
test: add tests for user repository
refactor: improve error handling
```

## Database Migrations

*Note: Migration system to be implemented*

## Testing

### Running Tests

```
pytest
```

### Creating Tests

1. Create test files in the `tests/` directory
2. Name test files with the prefix `test_`
3. Name test functions with the prefix `test_`

Example:

```python
# tests/test_user_repository.py

def test_create_user():
    # Test implementation
    pass

def test_get_user_by_id():
    # Test implementation
    pass
```

### Test Coverage

*Note: Coverage reporting to be implemented*

## Documentation

### API Documentation

The API documentation is automatically generated by FastAPI and available at:

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### Code Documentation

Document your code with docstrings following the Google style:

```python
def get_user_by_id(user_id: int) -> User:
    """
    Retrieves a user by ID.
    
    Args:
        user_id: The ID of the user to retrieve
        
    Returns:
        User: The user object if found
        
    Raises:
        UserNotFoundError: If the user does not exist
    """
    # Implementation
```

## Troubleshooting

### Common Issues

#### Database Connection Error

- Check that your database is running
- Verify the `DATABASE_URL` in your `.env` file

#### Missing Dependencies

- Update your virtual environment:
  ```
  pip install -r requirements.txt
  ```

#### Test Failures

- Check that your database migrations are up to date
- Ensure that test data is properly set up and torn down
